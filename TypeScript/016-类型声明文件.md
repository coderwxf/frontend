类型声明文件用于为 TypeScript 提供类型信息，而不包含具体的实现。

通常命名为 `[模块名].d.ts`，其中 `d` 表示 `declaration`（声明）。



## 全局类型声明

在 `.d.ts` 文件中定义的接口或类型可以在全局范围内使用。

```typescript
// foo.d.ts
declare interface User {
  name: string;
  age: number;
}
```

在其他文件中可以直接使用：

```typescript
// index.ts
const user: User = {
  name: 'John',
  age: 23
};
```



## 模块化类型声明

如果在 `.d.ts` 文件中使用 `export` 关键字，则需要显式导入。

```typescript
// foo.d.ts
export interface User {
  name: string;
  age: number;
}

export default interface Foo {
  key: 'foo';
}
```

在其他文件中需要导入：

```typescript
// index.ts
import type Foo from './foo';
import type { User } from './foo';

const user: User = {
  name: 'John',
  age: 23
};

let foo: Foo = { key: 'foo' };
```



## 自动生成类型声明文件

通过设置 TypeScript 编译器的 `declaration` 选项为 `true`，可以自动生成 `.d.ts` 文件。

```json
{
  "compilerOptions": {
    "declaration": true
  }
}
```



## 类型声明文件的来源

1. **TS 内置类型声明**：涵盖 JavaScript 标准库和运行环境 API。
2. **库自带的类型声明**：通过 `package.json` 的 `types` 字段指定。
3. **DefinitelyTyped 仓库**：社区维护的常见 JS 库的类型声明，通常以 `@types` 命名。
4. **用户自定义类型声明**：用户自己编写的类型声明文件。



## 为第三方库编写类型声明

可以为第三方库编写类型声明文件，以便在 TypeScript 中使用。

```typescript
// shims.d.ts
declare module 'moment' {
  export interface Moment {
    format(format: string): string;
    add(amount: number, unit: 'days' | 'months' | 'years'): Moment;
    subtract(amount: number, unit: 'days' | 'months' | 'years'): Moment;
  }

  function moment(input?: string | Date): Moment;
  export default moment;
}
```



### 使用 `declare module '模块名';`

如果只是简单声明模块而不定义类型，模块类型为 `any`。

```typescript
declare module 'some-module';
```

