## 字面量类型

在 TypeScript 中，字面量类型是指单个具体值作为类型，所以也被叫做值类型。

这种类型在某些情况下非常有用，尤其是在结合联合类型时。

```typescript
let x: 'hello';

x = 'hello'; // 正确
x = 'world'; // 报错
```



TypeScript 推断类型时，遇到`const`命令声明的变量

+ 如果代码里面没有类型注解，就会推断该变量是值类型。
+ 如果代码里面存在类型注解，则以显示声明的类型注解为准。

```typescript
const x = 'https'; // x 的类型是 "https"
const y: string = 'https'; // y 的类型是 string
```



TypeScript需要和JavaScript语法行为保持一致，所以对于对象常量，并不会推导为值类型

```typescript
const x = { foo: 1 }; // x 的类型是 { foo: number }
```



### 值类型条件

要成为字面量类型，需满足以下条件：

1. 使用 `const` 声明。
2. 赋值为基本数据类型（如 `string`、`number`）。



### 运算表达式的类型

运算表达式的结果通常是基本类型，而不是字面量类型。

```typescript
const x: 5 = 4 + 1; // 报错，因为 4 + 1 的结果是 number 类型
```

因为四则运算是运行时行为，TypeScript是静态类型检测，所以TypeScript 并不会对表达式进行求值



## 联合类型

 联合类型使用符号 `|` 表示，意味着一个变量可以是多个类型之一。

```typescript
let setting: true | false; // 等价于 boolean
```



在书写较长的联合类型时，可以使用竖杠 `|` 来格式化代码，使其更易读。

```typescript
let x:
  | 'one'
  | 'two'
  | 'three'
  | 'four';
```



### 类型缩小

类型缩小是指在使用联合类型时，通过某些检查手段，将变量的类型范围缩小到更具体的类型。

```typescript
function printId(id: number | string) {
  if (typeof id === 'string') {
    console.log(id.toUpperCase());
  } else {
    console.log(id);
  }
}
```



### 类型保护

类型保护是指在代码中使用特定的检查（如 `typeof`、`instanceof` 等）来缩小变量的类型。

```typescript
function getPort(scheme: 'http' | 'https') {
  switch (scheme) {
    case 'http':
      return 80;
    case 'https':
      return 443;
  }
}
```



## 交叉类型

交叉类型使用符号 `&` 表示，意味着一个类型必须同时满足多个类型的条件

```ts
let x: number & string; // type x => never
```

`number & string` 是一个不可能存在的类型，因为一个值不可能同时是 `number` 和 `string`，因此 `x` 的类型是 `never`。



交叉类型常常用来为对象类型添加新属性。

```ts
type A = { foo: number };

type B = A & { bar: number };
```

对应`B`的类型就是

```ts
{ foo: number; bar: number }
```
