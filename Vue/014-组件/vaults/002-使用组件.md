## 使用组件

一个 Vue 组件在使用前需要先被“注册”，这样 Vue 才能在渲染模板时找到其对应的实现

```js
<script setup>
// 要使用一个子组件，我们需要在父组件中导入它
// 通过 <script setup>，导入的组件都在模板中直接可用
import ButtonCounter from './ButtonCounter.vue'
</script>

<template>
  <h1>Here is a child component!</h1>
  <ButtonCounter />
</template>
```



每当你使用一个组件，就创建了一个新的**组件实例**， 因此组件被注册后可以被重用任意多次

每一个组件实例都拥有自己独立的"组件作用域"，维护着自己的状态

```html
<ButtonCounter />
<ButtonCounter />
<ButtonCounter />
```



## 注册组件

组件注册有两种方式：**全局注册** 和 **局部注册**



### 全局注册

可以使用 [Vue 应用实例](https://cn.vuejs.org/guide/essentials/application.html)的 `app.component()` 方法注册一个全局组件

一个全局组件，可以在当前应用中的任何组件的模板中被使用，而不需要额外再导入

```ts
import { createApp } from 'vue'
import MyComponent from './App.vue'

const app = createApp({})

app.component(
  // key - 注册的名字
  'MyComponent',
  // value - 组件的实现
  MyComponent
)
```

`app.component()` 方法可以被链式调用

```html
app
  .component('ComponentA', ComponentA)
  .component('ComponentB', ComponentB)
  .component('ComponentC', ComponentC)
```



### 局部注册

全局注册虽然很方便，但有以下几个问题

1. 全局注册，但并没有被使用的组件无法在生产打包时被自动移除 (也叫“tree-shaking”)。如果你全局注册了一个组件，即使它并没有被实际使用，它仍然会出现在打包后的 JS 文件中
2. 全局注册在大型项目中使项目的依赖关系变得不那么明确。在父组件中使用子组件时，不太容易定位子组件的实现。和使用过多的全局变量一样，这可能会影响应用长期的可维护性



相比之下，局部注册的组件需要在使用它的父组件中显式导入，并且只能在该父组件中使用。它的优点是使组件之间的依赖关系更加明确，并且对 tree-shaking 更加友好



请注意：**局部注册的组件在后代组件中并不可用**, 局部注册的组件仅在当前组件可用，而在任何的子组件或更深层的子组件中都不可用



在使用 `<script setup>` 的单文件组件中，导入的组件可以直接在模板中使用，无需注册：

```html
<script setup>
 import ComponentA from './ComponentA.vue'
</script>

<template>
  <ComponentA />
</template>
```



如果没有使用 `<script setup>`，则需要使用 `components` 选项来显式注册：

```ts
import ComponentA from './ComponentA.js'

export default {
  components: {
    ComponentA
  },
  setup() {
    // ...
  }
}
```



## 组件名格式

在单文件组件中，推荐为子组件使用 `PascalCase` 的标签名

虽然原生 HTML 标签名是不区分大小写的，但 Vue 单文件组件是可以在编译中区分大小写的，也可以使用 `/>` 来关闭一个组件标签

1. PascalCase 是合法的 JavaScript 标识符

   这使得在 JavaScript 中导入和注册组件都很容易，同时 IDE 也能提供较好的自动补全

   

2. `<PascalCase />` 在模板中更明显地表明了这是一个 Vue 组件，而不是原生 HTML 元素

   同时也能够将 Vue 组件和自定义元素 (web components) 区分开来。



在单文件组件和内联字符串模板中，我们都推荐这样做。但是，PascalCase 的标签名在 DOM 模板中是不可用的

为了方便，Vue 支持将模板中使用 kebab-case 的标签解析为使用 PascalCase 注册的组件

这意味着一个以 `MyComponent` 为名注册的组件，在模板中可以通过 `<MyComponent>` 或 `<my-component>` 引用

这让我们能够使用同样的 JavaScript 组件注册代码来配合不同来源的模板。



如果你是直接在 DOM 中书写模板 (例如原生 `<template>` 元素的内容)，模板的编译需要遵从浏览器中 HTML 的解析行为。在这种情况下，你应该需要使用 `kebab-case` 形式并显式地关闭这些组件的标签。

```html
<!-- 如果是在 DOM 中书写该模板 -->
<button-counter></button-counter>
<button-counter></button-counter>
<button-counter></button-counter>
```
