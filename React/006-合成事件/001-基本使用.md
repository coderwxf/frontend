## 合成事件

react为了屏蔽不同浏览器对于事件处理的差异，在次基础上进行了二次封装，形成的事件就是合成事件

合成事件命名使用onXxxx的形式，获取到的事件对象也是合成事件对象

可以通过合成事件对象的`nativeEvent`获取到原生事件对象

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  handleClick(e) {
    console.log(this) // => undefined
    console.log(e) // => SyntheticBaseEvent{...}
    console.log(e.nativeEvent) // => PointerEvent{...}
  }

  render() {
    return (
      <>
        {/* onXxxx 是事件冒泡阶段执行 onXxxCapture是事件捕获阶段执行 */}
        <button onClick={(e) => this.handleClick(e)}>click me</button>
        <button onClickCapture={(e) => this.handleClick(e)}>click me</button>
      </>
    )
  }
}
```



## 修正this

为了可以在事件处理函数中操作状态，我们需要手动修正this指向

 

`方式一 --- bind`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  handleClick() {
    console.log(this)
  }

  render() {
    return (
      <>
      	{/* 使用bind方法预处理this，从而修正this指向 */}
        <button onClick={this.handleClick.bind(this)}>click me</button>
      </>
    )
  }
}
```



`方式二 --- 类表达式`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  // 类表达式是被挂载到组件实例上的
  // 这段代码会在构造器被执行，所以this指向的就是组件实例
  handleClick = () => {
    console.log(this)
  }

  render() {
    return (
      <>
        <button onClick={this.handleClick}>click me</button>
      </>
    )
  }
}
```



`方式三 --- 箭头函数`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  handleClick() {
    console.log(this)
  }

  render() {
    return (
      <>
        <button onClick={() => this.handleClick()}>click me</button>
      </>
    )
  }
}
```



## 传参

`方式一 --- bind`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  // 修正this: const fn = fun.bind(...arg1)
  // 函数调用: fn(...arg2) --> 此时传入的主要是合成事件对象
  // 实际传入参数 ...[...arg1, ...arg2]
  handleClick(x, y, e) {
    console.log(x, y, e)
  }

  render() {
    return (
      <>
        <button onClick={this.handleClick.bind(this, 10, 20)}>click me</button>
      </>
    )
  }
}
```



`方式二 --- 类表达式`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  handleClick = (x, y, e) => {
    console.log(x, y, e)
  }

  render() {
    return (
      <>
        {/* 调用函数本质是箭头函数，所以bind的第一个参数没有意义, 可以使用null或undefined占位 */}
        <button onClick={this.handleClick.bind(null, 10, 20)}>click me</button>
      </>
    )
  }
}
```



`方式三 --- 箭头函数`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  handleClick(e, x, y) {
    console.log(x, y, e)
  }

  render() {
    return (
      <>
        {/* 此时e是我们主动获取并传递的，相当于搞了个中间层，所以可以自由控制事件对象的传递位置 */}
        <button onClick={(e) => this.handleClick(e, 10, 20)}>click me</button>
      </>
    )
  }
}
```

