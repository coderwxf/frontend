## 类组件

```jsx
import { PureComponent, createRef } from 'react'

class Child extends PureComponent {
  state = {
    name: 'child'
  }

  render() {
    return <h2 ref={el => this.childEl = el}>child</h2>
  }
}

export default class App extends PureComponent {
  el = createRef()

  render() {
    return (
      <>
        <Child ref={this.el} />
      </>
    )
  }

  componentDidMount() {
    // ref绑定到组件实例上，获取的是组件实例
    console.log(this.el.current) // => Child
    // 获取组件实例内部属性和DOM元素
    console.log(this.el.current.state) // => { name: 'child' }
    console.log(this.el.current.childEl) // => <h2>child</h2>
  }
}
```



## 函数组件

```jsx
import { PureComponent, createRef, forwardRef } from 'react'

// 函数没有组件实例，直接在函数组件上设置ref是无效的，会报错
// 但是我们可以借助React.forwardRef来实现ref的传递

// 使用rowardRef包裹函数组件后，组件多了一个ref参数
// ref的值是父组件传递的ref -- 在这里就是App组件的this.el
const Child = forwardRef(function(props, ref) {
  // 将父组件传入的ref赋值给子组件的DOM元素
  return <div ref={ref}>Child</div>
})

export default class App extends PureComponent {
  el = createRef()

  render() {
    return (
      <>
        <Child ref={this.el} />
      </>
    )
  }

  componentDidMount() {
    console.log(this.el.current) // => <div>Child</div>
  }
}
```

