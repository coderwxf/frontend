## 批处理机制

在React18中，只要遇到`setState`修改状态，就会将状态更新加入到一个更新队列`updater`中(或者叫渲染队列`updater`)，在下一次`tick`一开始执行的时候统一进行更新，这种更新机制被称之为React的批处理机制 「也就是说setState更新操作都是异步的」

好处是:  降低视图更新频率，提升了性能 「 同步渲染会在状态更新完毕后，将所有生命周期走一遍后，再进行下一个状态更新，非常消耗性能 」



### setState vs nextTick

1. `setState`会将更新操作放入到`updater`队列，具体的执行流程取决于react自身内部实现 「 在表现上，多数情况下，setState的回调会在执行微任务队列的时候被执行 」
2. `nextTick`会被插入到下一个`tick`周期的微任务队列中，从而确保执行`nextTick`回调时，可以获取到更新后的DOM元素
   + tick周期 = 一个宏任务执行 + 清空微任务队列 + 可能需要执行的DOM更新

