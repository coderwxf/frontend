```js
import { Component } from 'react'

export default class App extends Component {
  state = {
    count: 18,
    total: 30
  }

  shouldComponentUpdate() {
    return false
  }

  render() {
    const { count } = this.state
    return (
      <>
        <div>{ count }</div>
        <button onClick={() => this.add()}>add count</button>
      </>
    )
  }

  add() {
    // this.setState(partialState, callback)
    // 1. partialState 更新的状态
    //    + 可以是部分的，也可以是全部的
    //    + 会和原来的状态执行Object.assign操作

    // 2. callback 状态更新完毕后的回调函数
    //    + 会在componentDidUpdate之后，DOM更新前执行
    //    + 无论状态是否更新成功，都会执行 -- 类似于Vue中的$nextTick
    //      在事件队列中，执行完一个宏任务，并清空微任务队列 被称之为一个tick
    //      $nextTick和this.setState的callback都是在下一个tick一开始执行
    //      此时可以确保
    //        1. VDOM已经更新完毕 -- 可以获取更新后的状态
    //        2. 即使SCU返回false -- componentDidUpdate不会执行，但是callback依旧会执行
    this.setState({
      count: this.state.count + 1
    }, () => {
      console.log(this.state.count)
    })
  }

  // 1. setState的callback可以在指定状态发生改变后，才被回调
  // 2. componentDidUpdate会在任意状态发生改变后，被回调
  componentDidUpdate() {
    console.log('componentDidUpdate')
  }
}
```


