首次渲染

1. 开启一个单独的执行上下文 EC1，加载解析函数组件
2. 遇到useEffect，通过`mountEffect`方法，将符合条件的副作用函数以及对应依赖加入到副作用列表effect中
3. 视图渲染完成后，通过`updateEffect`方法，依次执行effect链表中符合执行条件的副作用函数
   + 副作用函数返回的清理函数会被缓存起来



组件更新导致重新渲染

1. 开启一个新的执行上下文 EC2，重新加载解析函数组件
2. 遇到useEffect，通过`mountEffect`方法，将符合执行条件的副作用函数及其依赖加入到副作用列表effect中
3. 视图渲染完成后，通过`updateEffect`方法，依次执行新的effect链表中的效果函数
   + 对于那些排入队列的 `useEffect` 副作用，如果在上次渲染时它们返回了清理函数，那么 React 会先调用这些清理函数
   + 依次执行effect列表中对应的副作用函数

![img](https://s2.loli.net/2024/04/05/owuBOXx6cqbaPJC.jpg)