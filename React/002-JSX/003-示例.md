## 模拟v-if/v-show

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  state = {
    flag: false
  }

  render() {
    let { flag } = this.state
    return (
      // 这里是js，不是jsx -- 使用普通js注释即可
      <>
      	{/* 这里是jsx, 里面只能放html和js，所以使用jsx注释 */}
        <button onClick={() => this.changeFlag()}>change</button>
        
      	{/* 模拟v-if */}
      	{flag && <h2>模拟v-if</h2>}
  			{flag ? <h2>模拟v-if</h2> : null}
  
      	{/* 模拟v- */}
  			<h2 style={{
          display: flag ? 'block' : 'none'
        }}>模拟v-show</h2>
      </>
    )
  }

  changeFlag() {
    this.setState({
      flag: !this.state.flag
    })
  }
}
```



## 列表循环

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  state = {
    users: ['Klaus', 'Steven', 'Alex']
  }

  render() {
    let { users } = this.state
    return (
      <>
        {
          users.map((user, index) => {
            // 循环元素 必须加上key 以有利于dom-diff
            // key值 一般要使用 不会改变的 string/number类型值
      			//     ---- 所以原则上，尽可能不要使用索引作为key，因为索引在元素crud后会发生改变
      			return (
              <div key={index}>
                <span>{user}</span>
              </div>
            )
          })
        }
      </>
    )
  }

  changeFlag() {
    this.setState({
      flag: !this.state.flag
    })
  }
}
```



`注意点`

```jsx
return (
  <div key={index}>
    <span>{user}</span>
  </div>
)
```

这里的小括号 是为了方便换行，增加可读性存在的

如果不加小括号，则必须写成

```jsx
return <div key={index}>
  <span>{user}</span>
</div>
```



## 单独循环五次

### 稀释数组 和 密集数组

```js
// 参数是数值n => 生成长度为n的数组，每一项是empty
const arr1 = new Array(5) // => [empty * 5]

// 参数是字符串n => 生成数组 ['n']
const arr2 = new Array('5') // => ['5']

// 参数不止一个 => 生成由参数组成的数组
const arr3 = new Array(1, 2, 3) // => [1, 2, 3]
```

有empty项的数组就是稀释数组，没有empty项的数组就是密集数组

 数组迭代方法会自动跳过 empty元素

```js
// 全是empty, 都被自动跳过，没有任何输出
new Array(5).forEach(item => console.log(item))

// 不是empty，会被数组迭代方法所迭代
new Array(5).fill('').forEach(item => console.log(item)) // 输出五个空字符串
```



### 实现单独循环五次

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  state = {
    users: ['Klaus', 'Steven', 'Alex']
  }

  render() {
    // 如果参数必须要传，但是不使用 可以使用 下划线占位
    return (
      <>
        {
          new Array(5).fill('').map((_, index) => {
            return (
              <div key={index}>
                <span>{index + 1}</span>
              </div>
            )
          })
        }
      </>
    )
  }

  changeFlag() {
    this.setState({
      flag: !this.state.flag
    })
  }
}
```



