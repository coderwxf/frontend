context只能实现祖先组件和后代组件之间的数据传递

如果想给任意两个组件之间传递数据 「 不考虑他们之间的层次关系 」 就可以使用 事件总线

常见的事件总线库有很多，这里以[mitt](https://www.npmjs.com/package/mitt)为例



`event-bus.js`

```js
import mitt from 'mitt'

export default mitt()
```



`祖先组件`

```jsx
import React, { PureComponent } from 'react'
import emitter from './event-bus'
import Cpn from './Cpn'

export class App extends PureComponent {
  state = {
    x: 0
  }

  changeX = x => {
    this.setState({ x })
  }

  render() {
    emitter.on('changeX', this.changeX)

    return (
      <>
        <div>{ this.state.x }</div>
        <Cpn />
      </>
    )
  }
}

export default App
```



`后代组件`

```jsx
import React, { PureComponent } from 'react'
import emitter from './event-bus'

export class Cpn extends PureComponent {
  change() {
    emitter.emit('changeX', 100)
  }

  render() {
    return (
      <button onClick={ () => this.change() }>click me</button>
    )
  }
}

export default Cpn
```

