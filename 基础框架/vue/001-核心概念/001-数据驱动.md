## 数据驱动

原生操作 => 获取DOM并操作DOM => 自己实现逻辑 + 界面

现代框架「 Vue/React 」=> 数据驱动 => 只需要实现逻辑，界面更新「 DOM操作 」交给框架来负责实现



### 基本原理

1. 修改数据后，以某种形式通知框架更新视图 => 即使用最新数据重新渲染视图

   + vue会自动监听数据改变并进行视图更新 => 响应式
   + react需要手动通知框架来进行视图更新

2. 框架根据最新的数据生成VDOM

   + 第一次渲染 

     + VDOM => DOM

     + 缓存VDOM

   + 后续渲染
     + 全量生成新的VDOM
     + 新旧VDOM 进行 DOM-DIFF => 找到需要更新的最小内容「 patch补丁包 」
     + 更新DOM
     + 使用新的VDOM替换之前缓存的VDOM



### 状态

状态 => 一种特殊的数据

当数据满足如下两个条件即可被认为是状态

1. 参与界面渲染
2. 数据值改变后，界面需要更新





### 实现方式

react => MVC => model + view + + controller 「 这里的controller就是react框架 」

![image.png](https://s2.loli.net/2024/10/21/oHsGLj6hba5DEne.png) 



vue => MVVM => model + view + viewModel ( 视图模型层 )「 这里的vm就是vue框架 」

![image.png](https://s2.loli.net/2024/10/21/2aYoi1N8XchZgvb.png) 



MVVM 比 MVC 多实现的功能是 => 可以自动监听视图改变「 主要是表单元素输入内容的改变 」并更新状态 => 框架自己实现了受控组件功能



所以对于数据驱动的前端框架往往具有如下特点

1. 存在自己的UI编写语法 「 以便于框架自己拿取状态并渲染视图 」
   + vue => template 或 JSX
   + react => JSX
2. 存在自己的状态绑定规则
   + react => 只要动态绑定一律使用大括号语法（大胡子语法）「 `{ exp }` 」
   + vue
     + 绑定值 => 小胡子语法（mustache语法）「 `{{ exp }}`」
     + 绑定属性值 => 指令「 以`v-`开头的自定义属性 」

> 无论那种状态绑定规则 => 其可以插入的值「 exp 」都是 任何合法的JavaScript表达式 => 可以放在`return`后边的值





