迭代器 类似于 数据库的光标 



## 作用

1. 对某个数据结构进行遍历
2. 无需关心数据结构的具体实现 「例如不用关心这个数据结构的长度是否是有限的，还是无限的」



## 迭代器协议

迭代器需要满足如下条件，「满足如下条件的迭代器，也被称之为 满足迭代器协议」

1. 迭代器本身是一个对象

2. 实现了next方法 --- next可以无参也可以有一个参数

3. next方法返回了一个对象，该对象类型如下

   ```ts
   {
     value: unknown, // value -- 每次迭代获取的结果
     done: boolean // done -- 是否迭代完成
   }
   ```

   

## 使用示例

```js
const user = {
  friends: ['Alex', 'Klaus', 'Steven']
}

function genIterator(v) {
  let index = 0

  return {
    next() {
      return  {
        value: v.friends[index++],
        done: index > v.friends.length
      }
    }
  }
}

// 生成一个专门用于迭代user.friends的迭代器
const iter = genIterator(user)

// 第一次迭代，指针位于第一个元素 --- 此时done可以省略 --- 判断时，undefined会被自动转换为false
console.log(iter.next()) // => { value: 'Alex', done: false }

// 第二次迭代，指针位于第二个元素
console.log(iter.next()) // => { value: 'Klaus', done: false }

// 第三次迭代，指针位于第三个元素
console.log(iter.next()) // => { value: 'Steven', done: false }

// 第四次迭代，指针位于第四个元素 --- 迭代完成，done为true
// 迭代完成时，value一般返回undefined，但也可以返回其他值
// + 如果返回undefined，value值就可以省略
// + 如果返回其余值，就是迭代完成后的默认返回值
console.log(iter.next()) // => { value: undefined, done: true }

// 迭代完成，指针不移动，返回相同结果
console.log(iter.next()) // => { value: undefined, done: true }
```

