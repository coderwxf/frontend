## 分类

1. 标准属性
   + 标准全局属性 -- 针对所有元素，如`id`、`title`、`class`、`style`等
   + 特殊元素标准属性 
     1. `href`是`a`元素特有的
     2. `type`、`value`、`name`是表单元素特有的
2. 非标准属性 -- 自定义属性



对于标准属性，会映射为DOM元素的直接属性

例如存在DOM元素`el`，则存在`el.id`、`el.title`、`el.class`、`el.style`等



### `hidden`

1. 标准全局属性
2. 本质通过`display: none;`来控制元素的隐藏

```html
<button hidden>按钮</button>
```



## 通用操作

所有属性（无论是标准的属性还是自定义的属性）都存在如下的属性和方法

| 属性或方法                     | 功能                   | 说明                                                         |
| ------------------------------ | ---------------------- | ------------------------------------------------------------ |
| elem.hasAttribute(name)        | 检查属性是否存在       | 返回布尔值                                                   |
| elem.getAttribute(name)        | 获取属性值             | 1. 有值返值，**无值返null**<br />2. **返回值的类型都是string** |
| elem.setAttribute(name, value) | 设置属性值             | 1. 有则修改，无则添加<br />2. **设置的属性值会自动转换为字符串类型 ( 如果不是字符串类型的话 )** |
| elem.removeAttribute(name)     | 移除属性               | 1. 没有返回值<br />2. 移除失败，静默失效                     |
| attributes                     | 获取元素所有的属性集合 | 1. 结果是一个可迭代的伪数组对象<br />2. 伪数组中的每一项都是一个由name属性和value属性组成的对象<br />    + name 表示 属性名<br />    + value 表示 熟悉值 |

```html
<div class="box" id="dv" name="Klaus" age="23"></div>
```

```js
const boxEl = document.getElementById('dv')

// boxEl.attributes 属性可以获取由当前元素中所有属性组成的可迭代对象
const attributes = boxEl.attributes

console.log(attributes.id) // -> 一个有name和age属性的对象
console.log(attributes.name) // -> 一个有name和age属性的对象

console.log(attributes.id.name) // => id - 属性key
console.log(attributes.id.value) // => dv - 属性值

// attributes是一个可迭代对象
for (const attr of attributes) {
  console.log(attr.name, attr.value)
  /*
    =>
    class box
    id dv
    name Klaus
    age 23
  */
}
```



通过通用方法获取属性，不区分大小写

```js
const el = document.getElementById('box')
// 1. 以下两种方式是等价的
// 2. 有checked属性，结果是空字符串
// 3. 没有checked属性，结果是null
console.log(el.getAttribute('checked'))
console.log(el.getAttribute('CHECKED'))
```



## 标准属性

对于标准的attribute，会在DOM对象上创建与其对应的property属性

```html
<!-- HTML元素标签上的属性 被称之为attribute -->
<div class="box" id="dv" name="Klaus" age="23"></div>
```

```js
const boxEl = document.getElementById('dv')

// 对于标准的属性，会在对应dom对象中生成同名属性
// 这类属性被称之为property
console.log(boxEl.className) // => box

// 对于标准属性，如果某一个属性没有显示设置对应的值
// 那么在dom对象中，会存在对应属性的默认值，且该默认值为空字符串
console.log(boxEl.title) // => ''(空字符串)

// 非标准属性不会有property存在于对应的dom对象中
// 所以获取对应属性值的时候，得到的结果是undefined
console.log(boxEl.name) // => undefined
```

1. `attribute`和`property`不一定同名，如`class`会转换为`className`、`for`会转换为`htmlFor`

2. attribute 和 property 是互通的,  修改他们中的任意一个，会导致DOM更新，从而另一个值也会相应发生改变

```js
const checkboxEl = document.getElementById('check')

// 通过property获取的属性值是有类型的
console.log(checkboxEl.checked, typeof checkboxEl.checked) // => true Boolean

// 通过attribute获取的属性值永远为字符串类型
console.log(
  checkboxEl.getAttribute('checked'),
  typeof checkboxEl.getAttribute('checked')
) // => ''(空字符串) String
```



如果同时通过property属性和attribute属性去设置同一个属性的属性值的时候

元素最终的结果，取决于他们设置的先后顺序

```js
inputEl.className = 'property'
inputEl.setAttribute('class', 'attribute')
```

上述示例的最终结果是`attribute`



但有一个特例，那就是value属性

value属性一般用于表单元素，而表单元素存在自己的状态

对于表单元素，用户输入改变的其实是value属性，而不是attribute



`setAttribute('value', 'initialValue')`：设置表单元素的初始值。这是页面加载时元素的默认值

而之后如果用户输入或通过JavaScript改变 `inputEl.value`，那么将使用value属性值，而不再使用`attribute`属性值

```js
inputEl.value = 'property'
inputEl.setAttribute('value', 'attribute')
```

在上边示例中，`inputEl`中的值是`property`， 而不是`attribute`



```js
// 假设输入123，触发了input元素的change事件
el.addEventListener('change', () => {
  el.setAttribute('value', 'attribute')

  console.log(el.getAttribute('value')) // => 'attribute'
  console.log(el.value) // => '123'
})
```

1. `Input`元素的默认值是`text`，输入的内容会自动转字符串

2. `setAttribute`会修改`attribute`，但不会修改`value`

   也就是说表单元素通过`value`来存储表单元素的实时状态

   表单元素的`value attribute`仅仅只是作为初始值设置

   两者并不同步



## 非标准属性

非标准属性除了可以通过 `xxxAttribute` 系列方法进行操作，还可以通过 `dataset` 属性进行操作，前提是这些属性以 `data-*` 格式定义。

```html
<div class="box" data-user-name="Klaus" data-age="23">lorem</div>
```

如果一个属性以`data-`开头，会别加入到名为`dataset`的property中

1. 在加入的时候会自动移除`data-`前缀
2. 如果 `data-*` 属性名中包含连字符（`-`），连字符后面的部分会被转换为大写字母，以符合小驼峰命名规则

```js
const boxEl = document.querySelector('.box')

console.log(boxEl.dataset)
/*
  =>
  {
    age: "23",
    userName: "Klaus"
  }
*/

console.log(boxEl.dataset.userName) // => Klaus
console.log(boxEl.dataset.age) // => 23
```

