## 创建元素

1. `document.createElement(tag)`创建一个元素
2. `document.createDocumentFragment`来创建对应的代码片段

```js
const ulEl = document.getElementById('ul')

// document.createDocumentFragment --- 新建一个临时代码片段
const fragmentEl = document.createDocumentFragment()

for (let i = 1; i <= 3; i++) {
  const liEl = document.createElement('li')
  liEl.textContent = i
  // 所有元素挂载到代码片段上
  fragmentEl.append(liEl)
}

// 统一挂载代码片段
ulEl.append(fragmentEl)
```

`document.createDocumentFragment`的主要功能是形成一个临时的代码片段

所以子元素挂载到代码片段后，再统一挂载到DOM下

从而尽可能将相关操作在内存中实现，尽可能的减少DOM的回流，提高性能 「 多次DOM操作合并为一次 」



## 元素CRUD

元素CRUD 分为新方法和旧方法

旧方法，需要通过父元素操作子元素，并且一次只能操作一个元素

新方法，参数支持可变参数，如果传递多个元素，这多个元素之间会被视为兄弟节点



**新方法**

| 方法                                  | 说明                            |
| ------------------------------------- | ------------------------------- |
| node.append(...nodes or strings)      | 在 node 末尾 插入节点或字符串   |
| node.prepend(...nodes or strings)     | 在 node 开头 插入节点或字符串   |
| node.before(...nodes or strings)      | 在 node 前面 插入节点或字符串   |
| node.after(...nodes or strings)       | 在 node 后面 插入节点或字符串   |
| node.replaceWith(...nodes or strings) | 使用给定的节点或字符串替换 node |
| node.remove()                         | 移除元素自身及对应子元素        |

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16d0b92b465e4437a4fe48035020dc78~tplv-k3u1fbpfcp-zoom-1.image) 



**旧方法**

| 方法                                       | 说明                                   |
| ------------------------------------------ | -------------------------------------- |
| parentElem.appendChild(node)               | 在parentElem的子元素列表的最后插入node |
| parentElem.insertBefore(node, nextSibling) | 在nextSibling前面插入node              |
| parentElem.replaceChild(node, oldChild)    | 用node替换oldChild                     |
| parentElem.removeChild(node)               | 通过父元素移除node                     |



`示例`

```js
const boxEl = document.querySelector('.box')
const boxSpanEl = boxEl.querySelector('span')

const pEl = document.createElement('p')
pEl.textContent = 'hello world'

// 1. 移除 boxSpanEl
// 2. 插入元素节点 pEl
// 3. 插入文本节点 lorem
boxSpanEl.replaceWith(pEl, 'lorem')
```





## 元素克隆

如果我们想要复制一个现有的元素，可以通过cloneNode方法

+ 可以传入一个Boolean类型的值，来决定是否是深度克隆
+ 深度克隆会克隆对应元素的子元素，否则不会

```js
const boxEl = document.querySelector('.box')

const cloneEl = boxEl.cloneNode()
const deepCloneEl = boxEl.cloneNode(true)

console.log(cloneEl) // => <div class="box"></div>

console.log(deepCloneEl)
/*
  =>
    <div class="box">
      <h2 class="title">hello world</h2>
      <span>Lorem, ipsum.</span>
    </div>
*/
```

