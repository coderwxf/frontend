和类组件中的setState一样，每次更新状态值，也不是立即更新，而是加入到更新队列中

+ React 18 全部采用批更新

+ React 18 之前
  + 在React管控方法 「 合成事件，生命周期 」 中，采用批处理更新
  + 在非React管控方法 「 定时器回调，异步回调，DOM事件回调 」中，采用同步更新



## 同步更新

`useState`也可以使用`flushSync`方法来将状态同步更新

```jsx
import React, { useState } from "react";
// flushSync 是react-dom的，不是react的
import { flushSync } from 'react-dom';

export default function App(props) {
  console.log('RENDER渲染');
  let [x, setX] = useState(10),
      [y, setY] = useState(20),
      [z, setZ] = useState(30);

  const handle = () => {
      flushSync(() => {
          setX(x + 1);
          setY(y + 1);
      });
      setZ(z + 1);
  };
  return <div className="demo">
      <span className="num">x:{x}</span>
      <span className="num">y:{y}</span>
      <span className="num">z:{z}</span>
      <button onClick={handle}>
          新增
      </button>
  </div>;
};
```

1. 初始渲染的时候 会打印一次 `RENDER渲染`
2. 点击按钮后，会打印两次 `RENDER渲染`, 而不是三次

