## JSX

JSX 叫做 JavaScript XML 

+ 是JavaScript的一个语法扩展
+ 作用是可以在JavaScript中编写XML/HTML标签
+ JSX本质是`React.createElement`方法调用的语法糖写法
+ JSX最终会被转译成普通的JavaScript对象 -- 这个JS对象就是VDOM
  + react能识别的对象表示只有VDOM，react无法直接识别JSX
  + 一般使用babel将JSX转换为`React.createElement`方法调用


```jsx
import React from 'react'; // react核心 -- 基础语法 --- JSX -> VDOM
import ReactDOM from 'react-dom/client'; // 渲染核心 --- VDOM -> DOM
import App from './App'

// 通过挂载点（容器元素）生成根容器
// 1. vue中的挂载点 一般是 div#app
// 2. react中的挂载点 一般是 div#root
const root = ReactDOM.createRoot(document.getElementById('root'));

// 通过根容器渲染视图
// 1. 视图 会被 挂载到 挂载点下 并替换挂载点中原本内容
// 2. 挂载点中的内容属于web app 但是挂载点本身不属于web app的一部分
// 3. root是根容器 App是根元素
root.render(
  <App />
);

```

| 库               | 说明                |
| ---------------- | ------------------- |
| react-dom/client | 网页APP，客户端渲染 |
| react-dom/server | 网页APP，服务器渲染 |
| react-native     | Native App          |



## 语法提示

vscode如何支持JSX语法「以支持格式化、快捷提示...」（二选一）

1. 通过vscode修改JS文件解析规则为JSX
2. 直接新建组件时，将后缀名设置为JSX



## 大括号语法

凡是在JSX中需要插入动态数据或者使用JS语法，就必须使用大括号语法

在大括号语法中，可以放入任何合法的JS表达式，所谓合法的JS表达式就是指那些运算后存在返回值的表达式，即可以放在return后边的表达式

1. 变量 / 值 
2. 四则运算
3. 三元运算符
4. 数组有返回值的高阶函数 「 map, filter, find等 」
5. 函数调用
6. ... 



## 根节点

+ 任何视图有且必须有一个根节点
+ 不能直接把`html/body`做为根容器 --- 不报错，有警告

+ 为了不增加HTML层级结构，可以使用空文档标记标签 `React.Fragment`



## React.Fragment

React Fragment (`<></>` 或 `<React.Fragment>`) 允许组件返回多个元素而不需要额外父元素包裹

这样可以避免添加不必要的DOM节点，有助于减少页面的DOM层级，提高渲染性能

其功能类似于vue中的`template`标签

```jsx
{/* 正确 */}
<React.Fragment key="foo"></React.Fragment>

{/* 错误 */}
< key="foo"></>
```



## 可以渲染的值

`基本数据类型`

1. string 和 number  值是啥 就渲染啥
2. 其余基本数据类型，渲染内容一律为空



`引用数据类型`

1. JSX对象: 可以被正常渲染
2. 数组对象: 把数组的每一项值都分别拿出来单独渲染 --- 不是转换为字符串后再渲染
3. 通过style设置对应样式，必须通过样式对象
4. 其余对象: 不能作为VDOM，渲染报错



## 行内样式

字符串写法不支持，会直接报错

```jsx
<div style="color: red;">{ count }</div>
```



内联样式必须通过样式对象进行设置

```jsx
<div style={{
	color: 'red',
  fontSize: 20,
  lineHeight: 1.5,
  WebkitUserSelect: 'none'
}}>{ count }</div>
```

1. 样式名 需要使用 小驼峰 --- 中划线支持，但会存在警告
   + 有一个特例，如果需要使用浏览器前缀，则样式名必须使用大驼峰写法
2. 样式值如果是number类型值 --- react在解析时，会在合适的样式属性后 加上px作为单位
3. 通过这种方式设置的样式是全局样式



class 和 for 是JS关键字，在JSX中需要转换为className 和 htmlFor

直接使用for 或class 属性 不会报错 但是会出现警告

```jsx
<label htmlFor="name">username</label>
<input type="text" id="name" className='user' />
```



```jsx
export default function App(props) {
  return (
    // react 不支持 className='child {props.className}'
    // 也就是不支持插值和普通字符串共用，需要自己进行字符串拼接
    <span className={`child ${props.className}`}>
      this is a function component
    </span>
  )
}
```



## 注释

1. JSX中输入JS表达式必须通过`{}`

2. 如果是`//`这类单行注释会导致本行后续内容全部变成注释内容

所以JSX只支持 块级注释 `{/* */}`

```jsx
import { PureComponent } from 'react'

export default class App extends PureComponent {
  render() {
    return (
      // 这里是JS部分，使用普通JS注释
      <>
       {/* 这里是JSX部分，使用JSX注释 */}
       <div>Hello World</div>
      </>
    )
  }
}
```



## 小括号

这里的小括号 是为了方便换行，增加可读性存在的

```jsx
return (
  <div key={index}>
    <span>{user}</span>
  </div>
)
```



如果不加小括号，则必须写成

```jsx
return <div key={index}>
  <span>{user}</span>
</div>
```



下面写法是错误的，返回值会变成undefined

```jsx
return 
<div key={index}>
  <span>{user}</span>
</div>
```

